
{% extends "landing/base_admin.html" %}

{% load static %}

{% block title %}
    Dashboard de Admin
{% endblock %}

{% block content %}

<div class="col-10 offset-md-1" id="div_principal">
    <div class="row">
        <div class="col-md-4">
            <h2 style="font-size: 16px;">Estadísticas del Sistema - Total de Médicos</h2>
            <canvas id="medicos"></canvas>
        </div>
        <div class="col-md-4">
            <h2 style="font-size: 16px;">Estadísticas del Sistema - Pacientes COVID</h2>
            <canvas id="pacientesCovid"></canvas>
        </div>
        <div class="col-md-4">
            <h2 style="font-size: 26px;">Estadísticas del Sistema - Citas Atendidas</h2>
            <canvas id="citasAtendidas"></canvas>
        </div>
    </div>
</div>
<div class="col-10 offset-md-1" id="div_principal" >
    <div class="col-md-12">
        <h2 style="font-size: 26px;">Estadísticas del Sistema - Especialidades</h2>
        <canvas id="especialidadesChart"></canvas>
    </div>
</div>

<!-- Se utiliza Chart.js desde una CDN -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    // Gráfico de médicos activos/inactivos
    var ctxMedicos = document.getElementById('medicos').getContext('2d');
    var medicosChart = new Chart(ctxMedicos, {
        type: 'doughnut',
        data: {
            labels: ['Activos', 'Inactivos'],
            datasets: [{
                label: 'Estado de Médicos',
                data: [{{ total_medicos_activos }}, {{ total_medicos_inactivos }}],
                backgroundColor: ['rgba(75, 192, 192, 0.2)', 'rgba(255, 99, 132, 0.2)'],
                borderColor: ['rgba(75, 192, 192, 1)', 'rgba(255, 99, 132, 1)'],
                borderWidth: 1
            }]
        },
    });

    // Gráfico para el estado de los pacientes COVID
    var ctxCovid = document.getElementById('pacientesCovid').getContext('2d');
    var pacientesCovidChart = new Chart(ctxCovid, {
        type: 'doughnut',
        data: {
            labels: ['Con COVID', 'Sin COVID'],
            datasets: [{
                label: 'Estado de Pacientes COVID',
                data: [{{ total_pacientes_covid }}, {{ total_pacientes_no_covid }}],
                backgroundColor: ['rgba(255, 206, 86, 0.2)', 'rgba(54, 162, 235, 0.2)'],
                borderColor: ['rgba(255, 206, 86, 1)', 'rgba(54, 162, 235, 1)'],
                borderWidth: 1
            }]
        },
    });

    // Gráfico para citas atendidas y no atendidas
    var ctxAtendidas = document.getElementById('citasAtendidas').getContext('2d');
    var citasAtendidasChart = new Chart(ctxAtendidas, {
        type: 'doughnut',
        data: {
            labels: ['Atendidas', 'No Atendidas'],
            datasets: [{
                label: 'Estado de Citas',
                data: [{{ total_citas_atendidas }}, {{ total_citas_no_atendidas }}],
                backgroundColor: ['rgba(153, 102, 255, 0.2)', 'rgba(255, 159, 64, 0.2)'],
                borderColor: ['rgba(153, 102, 255, 1)', 'rgba(255, 159, 64, 1)'],
                borderWidth: 1
            }]
        },
    });

    // Gráfico de especialidades
    var especialidadesCtx = document.getElementById('especialidadesChart').getContext('2d');
    var especialidadesChart = new Chart(especialidadesCtx, {
        type: 'line',
        data: {
            labels: [{% for especialidad in especialidades_data %}'{{ especialidad.nombre_especialidad }}',{% endfor %}],
            datasets: [{
                label: 'Especialidades',
                data: [{% for especialidad in especialidades_data %}{{ especialidad.total|default:0 }},{% endfor %}],
                backgroundColor: 'rgba(54, 162, 235, 0.2)',
                borderColor: 'rgba(54, 162, 235, 1)',
                borderWidth: 1
            }]
        },
    });
</script>
{% endblock %}
